# Ch 6 : 관측 가능성의 표준, 오픈텔레메트리


## 6.1 오픈텔레메트리 소개

### 목표
- 데이터가 생성, 수집, 전송되는 방식을 표준화
- 사용자가 소프트웨어를 더 잘 이해할 수 있도록 시스템, 언어, 응용 프로그램 전반에서 텔레메트리를 상호 연관시키는 데 필요한 도구를 제공
- 클라우드 네이티브 소프트웨어에 대한 관측 가능성 프레임워크 제공

> 다양한 언어로 개발된 애플리케이션의 신호와 텔레메트리를 통합하고자 하는 의도에서 시작됨

## 6.2 오픈 텔레메트리 컴포넌트

### 프로젝트 구성
- 신호(메트릭, 로그, 추적) : 로그, 메트릭, 추적에 대한 기술적인 스펙을 정의
- 콘텍스트 전파 : 다양한 스트림(업, 다운 스트림) 간에 문맥을 전달하는 과정
- 파이프 라인 : 오픈텔레메트리에서 컬렉터를 구현하는 구체적인 방법

### 6.2.1 신호의 구성 요소

#### 데이터 모델
- 메트릭(Metrics) : 시스템 성능 지표
- 로그(Logs) : 이벤트 기록 데이터
- 추적(Traces) : 요청 흐름 시각화 데이터

#### API
- 다양한 프레임워크의 자동 계측을 지원
- 특징
  - 공급업체에 의존성 없는 방식으로 계측하는 코드를 개발할 수 있다
  - 사용자가 빠르게 시작하고 실행할 수 있도록 다양한 언어로 계측 라이브러리를 사용할 수 있다.
  - 추적, 메트릭과 로깅 데이터를 생성하고 상호 연관시키기 위한 데이터 유형과 작업을 정의한다

#### SDK
- 로직 외적인 벤더와 기술 종속적인 문제를 해결
- 플러그인을 개발해서, API 패키지에 포함된 최소 구현을 대체함
- 데이터 수집, 처리 및 내보내기를 지원하는 라이브러리를 통해 API를 구현하고 지원함

#### 계측 라이브러리
- 직접적인 API 개발 없이 자동으로 계측이 가능하도록 도움 (다양한 언어 지원)
- 언어별로 진척률이 다름

#### 리소스
- 텔레메트리를 생성하는 엔티티
  - 파드명, 네임스페이스명, 프로세스명

#### 배기지
- 추적에서 사용되는, 사용자가 정의 가능한 키-값 쌍 형식의 메타데이터
- 대규모 분산 시스템을 구축하고 팀이 원하는 언어나 프레이무어크로 작업할 수 있도록 자율성을 제공하려는 경우에 유용함

#### 이벤트
- 스팬에서 사람이 읽을 수 있는 메세지
- 로그와 유사한 개념

#### 링크
- 스팬 간 관계를 표현하는 것
  - 스팬은 다른 스팬에 연결하는 스팬 링크를 생성할 수 있으나, 이를 생성하기 위해 스팬 콘텍스트가 필요

### 6.2.2 콘텍스트 전파
- 정의 : 시스템 간 요청이나 이벤트가 이동할 때 관련 데이터를 전달하는 과정

#### 구성 요소
- 컨텍스트(Context): 상태 정보의 집합.
프로파게이터(Propagator): 상태 정보를 전파하는 도구.
역할: 분산 시스템에서 추적 데이터를 연결하여 각 시스템 간 요청 흐름을 파악할 수 있게 함.
6.2.3 파이프라인
정의: 오픈텔레메트리 데이터 수집, 처리, 전송의 전 과정.
주요 단계:
수집: 데이터 수집 도구가 신호 데이터를 가져옴.
처리: 데이터를 집계하고 변환.
전송: 데이터 분석 도구로 전송.